(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{460:function(s,a,t){"use strict";t.r(a);var e=t(9),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"ospfv2的邻接关系建立过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ospfv2的邻接关系建立过程"}},[s._v("#")]),s._v(" OSPFv2的邻接关系建立过程")]),s._v(" "),t("h2",{attrs:{id:"dr-bdr的选举"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dr-bdr的选举"}},[s._v("#")]),s._v(" DR/BDR的选举")]),s._v(" "),t("h3",{attrs:{id:"dr-bdr的含义"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dr-bdr的含义"}},[s._v("#")]),s._v(" DR/BDR的含义")]),s._v(" "),t("ol",[t("li",[s._v("DR："),t("code",[s._v("Designated Router")]),s._v("指定路由器，在OSPF域中，每个路由器都"),t("code",[s._v("只")]),s._v("需要和DR/BDR建立邻居关系（这样子就避免了OSPF域中每个路由器之间都要相互建立邻居关系【full mesh】，节省了开销），这样子DR会拥有所有的LSA信息，并且DR将LSA信息转发给每个建立邻居关系的路由器；")]),s._v(" "),t("li",[s._v("BDR："),t("code",[s._v("Backup Designated Router")]),s._v("备份指定路由器，作为DR的备份，在DR失效后由BDR代替其功能；")])]),s._v(" "),t("blockquote",[t("p",[s._v("DR/BDR是指路由器的一个活动接口，并非是整台路由器。")])]),s._v(" "),t("h3",{attrs:{id:"dr-bdr的选举规则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dr-bdr的选举规则"}},[s._v("#")]),s._v(" DR/BDR的选举规则")]),s._v(" "),t("blockquote",[t("p",[s._v("DR/BDR的选举是一种状态激发的动作，在"),t("code",[s._v("Wait Time")]),s._v("超时后，会触发DR/BDR的选举")])]),s._v(" "),t("ol",[t("li",[t("p",[s._v("OSPF priority"),t("code",[s._v("最高")]),s._v("的是DR；（默认priority是1，可以通过"),t("code",[s._v("ip ospf priority x")]),s._v("来更改））（priority数值越大，优先级越高）")])]),s._v(" "),t("li",[t("p",[s._v("如果priority相同，那么"),t("code",[s._v("RID最大")]),s._v("的选举为DR；")])]),s._v(" "),t("li",[t("p",[s._v("BDR是优先级仅次于DR的路由器；")])]),s._v(" "),t("li",[t("p",[s._v("如果一个MA网络中原来的DR失效，那么BDR代替成为DR，这时还需要再选举一个BDR，BDR选举完成后，如果原来的DR恢复，也不会抢占，会成为网络中的DR或者DROther,这样有利于网络的稳定性；(DR/BDR不会抢占，如果需要进行一次抢占，那么需要输入"),t("code",[s._v("clear ip osfp process")]),s._v("清理ospf进程)")]),s._v(" "),t("p",[s._v("（OSPF启动后，如果40s（Wait timer）内没有新设备接入，那么久会开始DR/BDR的选举）；")]),s._v(" "),t("p",[s._v("可以在接口下，通过如下命令可以看到这个计时器：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("R1"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#show ip ospf interface ethernet 0/0")]),s._v("\nEthernet0/0 is up, line protocol is up\n  Internet Address "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1/24, Area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", Attached via Network Statement\n  Process ID "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", Router ID "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.1, Network Type BROADCAST, Cost: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n  Topology-MTID    Cost    Disabled    Shutdown      Topology Name\n        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("        no          no            Base\n  Transmit Delay is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" sec, State DR, Priority "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  Designated Router "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ID"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.1, Interface address "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\n  Backup Designated router "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ID"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2, Interface address "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\n  Timer intervals configured, "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("Hello "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(", Dead "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),s._v(", Wait "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(", Retransmit "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n    oob-resync "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("timeout")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),s._v("\n    Hello due "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" 00:00:02\n  Supports Link-local Signaling "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("LLS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  Cisco NSF helper support enabled\n  IETF NSF helper support enabled\n  Index "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1, flood queue length "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  Next 0x0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("/0x0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  Last flood scan length is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", maximum is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  Last flood scan "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" msec, maximum is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" msec\n  Neighbor Count is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", Adjacent neighbor count is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n    Adjacent with neighbor "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Backup Designated Router"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  Suppress hello "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" neighbor"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])])])]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("注意")])]),s._v(" "),t("p",[s._v("如果设置了priority 的值为0，那么该路由器不会被选择为DR/BDR，他会成为DROther(成员路由器)")]),s._v(" "),t("p",[s._v("MA网络：多路访问网络（multi-access），比如一个以太网就是一个典型的"),t("code",[s._v("广播多路访问BMA")]),s._v("网络，而帧中继中的点到多点网络就是"),t("code",[s._v("非广播多路访问NBMA")]),s._v("网络")])]),s._v(" "),t("h3",{attrs:{id:"一个ospf区域中多个dr-bdr"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一个ospf区域中多个dr-bdr"}},[s._v("#")]),s._v(" 一个OSPF区域中多个DR/BDR")]),s._v(" "),t("p",[s._v("上面了解了DR/BDR的选举规则后，这里还有比较容易混淆的一点是：")]),s._v(" "),t("p",[t("strong",[t("u",[s._v("DR/BDR的选举"),t("code",[s._v("并不是")]),s._v("在一个区域内所有OSPF路由器都参与选举，"),t("code",[s._v("而是")]),s._v("在"),t("code",[s._v("同一个MA网络中")]),s._v("，如果是在以太网就是在同一个广播域中选举DR/BDR")])])]),s._v(" "),t("p",[s._v("举例如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/ospf-drbdr.png",alt:"ospf-drbdr"}})]),s._v(" "),t("p",[s._v("这其中路由器"),t("code",[s._v("R8")]),s._v("上就可以看到两个DR/BDR，虽然他们是一个OSPF区域，但是出于不同的广播域。")]),s._v(" "),t("p",[s._v("R6的f0/0,R8的f/0,R9de f0/0,SW2构成了一个广播域，正常情况下，在这个MA网络中DR为")]),s._v(" "),t("h2",{attrs:{id:"邻接关系建立过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#邻接关系建立过程"}},[s._v("#")]),s._v(" 邻接关系建立过程")]),s._v(" "),t("blockquote",[t("p",[s._v("两台路由器之间建立邻接关系可以祖鲁额的分为两个阶段：1. 邻居关系建立阶段；2.邻接关系建立阶段。"),t("code",[s._v("邻居关系")]),s._v("是"),t("code",[s._v("邻接关系")]),s._v("建立的前提条件。")])]),s._v(" "),t("h3",{attrs:{id:"实验拓扑"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实验拓扑"}},[s._v("#")]),s._v(" 实验拓扑")]),s._v(" "),t("p",[s._v("之后论述OSPF邻接关系建立过程的实验拓扑图如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210714160206239.png",alt:"image-20210714160206239"}})]),s._v(" "),t("p",[s._v("R1和R2已经进行了基础配置：")]),s._v(" "),t("p",[s._v("R1:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("int lo\n\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.1 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".255.0\nint e0/0\n\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".255.0\nrouter ospf "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\trouter-id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.1\n\tnetwork "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.0 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.255 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("R2:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("int lo\n\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.2")]),s._v(".2.2 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".255.0\nint e0/0\n\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".255.0\nrouter ospf "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\trouter-id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.2")]),s._v(".2.2\n\tnetwork "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.0 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.255 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("R1和R2这时并"),t("code",[s._v("没有")]),s._v("开启"),t("code",[s._v("e0/0")]),s._v("接口，这时两台路由器并不会发送"),t("code",[s._v("HELLO")]),s._v("报文")]),s._v(" "),t("p",[s._v("如果要观察路由器建立OSPF邻接关系的过程，那么输入如下"),t("code",[s._v("DEBUG命令")]),s._v("：")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("debug ip ospf event  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("//")]),s._v("查看ospf的所有事件\ndebug ip ospf adj    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("//")]),s._v(" 查看建立邻接关系的交互信息\ndebug ip ospf hello  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("//")]),s._v("查看hello报文的交互信息\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"接口开启-ospf状态改为-init"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#接口开启-ospf状态改为-init"}},[s._v("#")]),s._v(" 接口开启，OSPF状态改为 "),t("code",[s._v("init")])]),s._v(" "),t("blockquote",[t("p",[s._v("路由器接口开启之前，ospf的转台处于"),t("code",[s._v("DOWN")]),s._v("的状态；")]),s._v(" "),t("p",[s._v("路由器接口开启后，发送"),t("code",[s._v("Hello")]),s._v("包，但没有收到"),t("code",[s._v("Hello")]),s._v("包时，状态为"),t("code",[s._v("Attempt")]),s._v("；")]),s._v(" "),t("p",[s._v("路由器接口开启后收到"),t("code",[s._v("Hello")]),s._v("包，状态改为"),t("code",[s._v("Init")]),s._v("；")])]),s._v(" "),t("p",[s._v("这时开启接口，会看到如下LOG日志，可以看到E0/0接口一旦起来，他们接口上建立邻接关系的"),t("code",[s._v("进程")]),s._v("也立马启动，")]),s._v(" "),t("p",[s._v("可以看到E0/0接口开始发送HELLO报文到组播地址"),t("code",[s._v("224.0.0.5")]),s._v("去尝试发现邻居")]),s._v(" "),t("p",[s._v("并可以看到E0/0接口的"),t("code",[s._v("WAIT Timer")]),s._v("计时器开始计时，")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210714162600793.png",alt:"image-20210714162600793"}})]),s._v(" "),t("p",[s._v("R1的e0/0接口的抓包：")]),s._v(" "),t("p",[s._v("通过抓包分析，可以看到37min42s的时候，确实抓到一个从192.168.1.1发到224.0.0.5的一个"),t("code",[s._v("Hello")]),s._v("包,")]),s._v(" "),t("p",[s._v("从这个packet可以看到 RID、Hello Interval 、接口的Priority（Router Priority），Router Dead Interval的值；")]),s._v(" "),t("p",[s._v("同时也可以看到这时的OSPF的DR/BDR都显示为"),t("code",[s._v("0.0.0.0")]),s._v("，说明这时还未选举DR/BDR")]),s._v(" "),t("blockquote",[t("p",[s._v("需要说明的是 Hello Interval、Router Dead Intereval、Wait Timer之间的关系：")]),s._v(" "),t("p",[t("code",[s._v("Wait Timer = Router Dead Interval = Hello Interval * 4")])]),s._v(" "),t("p",[s._v("通过在接口下输入"),t("code",[s._v("ip ospf hello-interval x")]),s._v(" "),t("code",[s._v("x")]),s._v("为修改后的时间间隔，单位为s;")]),s._v(" "),t("p",[s._v("输入"),t("code",[s._v("show ip ospf interface x")]),s._v(" "),t("code",[s._v("x")]),s._v("为接口，可以查看这三个参数的具体值")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210714163937942.png",alt:"image-20210714163937942"}})]),s._v(" "),t("p",[s._v("与此同时开启R2的e/0/0接口，可以看到和R1相同的信息：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210714170807973.png",alt:"image-20210714170807973"}})]),s._v(" "),t("p",[s._v("查看R2的e0/0接口的抓包，同样可以看到R2发出的"),t("code",[s._v("Hello")]),s._v("包")]),s._v(" "),t("img",{staticStyle:{zoom:"115%"},attrs:{src:"https://pic.bluebaozi.cn/img/image-20210714163740895.png",alt:"image-20210714163740895"}}),s._v(" "),t("blockquote",[t("p",[s._v("这里还需要注意的一点是，在起始状态，也就是R1和R2没有收到任何"),t("code",[s._v("hello")]),s._v("信息时，他们发送的"),t("code",[s._v("HELLO")]),s._v("包中的"),t("code",[s._v("Active Neighbor")]),s._v("字段没有任何值的（抓包中不会显示Active Neighbor）字段；")]),s._v(" "),t("p",[t("code",[s._v("Active Neighbor")]),s._v("字段本来用来存储每个接口上发现的邻居信息；")])]),s._v(" "),t("h3",{attrs:{id:"收到hello包-建立邻居关系-状态改为two-way"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#收到hello包-建立邻居关系-状态改为two-way"}},[s._v("#")]),s._v(" 收到Hello包，建立邻居关系，状态改为"),t("code",[s._v("Two Way")])]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("Two Way")]),s._v("状态建立的一个充分条件是：收到的Hello包中，"),t("code",[s._v("Active Neighbor")]),s._v("的值是自己的"),t("code",[s._v("RID")]),s._v("，那么本地OSPF接口状态立即变为"),t("code",[s._v("Two Way")]),s._v("状态，"),t("code",[s._v("Two Way")]),s._v("状态建立表明成功建立"),t("code",[s._v("邻居关系")])])]),s._v(" "),t("p",[s._v("R2先收到了R1的"),t("code",[s._v("Hello")]),s._v("包，从LOG日志可以看到")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715001751047.png",alt:"image-20210715001751047"}})]),s._v(" "),t("p",[s._v("从抓包日志可以看到这个包没有设置DR/BDR")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715002118557.png",alt:"image-20210715002118557"}})]),s._v(" "),t("p",[s._v("R2收到R1的 Hello包后，将"),t("code",[s._v("Hello")]),s._v("包中的"),t("code",[s._v("RID")]),s._v("记录在自己的接口数据结构中，并且将R1的状态视为"),t("code",[s._v("Init")]),s._v("，这时R2发出的"),t("code",[s._v("Hello")]),s._v("包中包含的"),t("code",[s._v("Active Neighbor")]),s._v("字段就是"),t("code",[s._v("1.1.1.1")]),s._v("(R1的"),t("code",[s._v("RID")]),s._v(")，这时R2还没有变为"),t("code",[s._v("Two Way")]),s._v("状态，因为还没有到"),t("code",[s._v("Active Neighbor")]),s._v("是自己"),t("code",[s._v("RID")]),s._v("的"),t("code",[s._v("Hello")]),s._v("包")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715003140058.png",alt:"image-20210715003140058"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715002829823.png",alt:"image-20210715002829823"}})]),s._v(" "),t("p",[s._v("然后，R1收到了这个"),t("code",[s._v("Active Neighbor")]),s._v("字段为自己"),t("code",[s._v("RID")]),s._v("的"),t("code",[s._v("Hello")]),s._v("数据包，那么R1立马变成了"),t("code",[s._v("Two Way")]),s._v("的状态")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715003104480.png",alt:"image-20210715003104480"}})]),s._v(" "),t("p",[s._v("之后，R1发单播给R2"),t("code",[s._v("Hello")]),s._v("包，这个Hello包中的"),t("code",[s._v("Active Neighbor")]),s._v("为R2的"),t("code",[s._v("RID")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715003925594.png",alt:"image-20210715003925594"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715004009373.png",alt:"image-20210715004009373"}})]),s._v(" "),t("p",[s._v("这时，R2收到了R1发给自己的单播Hello包，并且"),t("code",[s._v("Active Neighbor")]),s._v("的值为R2自己的"),t("code",[s._v("RID")]),s._v(",这时R2状态立马变成"),t("code",[s._v("Two Way")]),s._v("（这里是状态特指R2和R1之间的邻居关系变为"),t("code",[s._v("Two Way")]),s._v("状态，因为R2可能有多个邻居关系）")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715004324368.png",alt:"image-20210715004324368"}})]),s._v(" "),t("p",[s._v("在R1和R2都等待40s的超时时间后，各自开始根据自己接口数据结构中收集到的"),t("code",[s._v("Neighbor")]),s._v(",开始选举DR/BDR")]),s._v(" "),t("p",[s._v("R1：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715004742311.png",alt:"image-20210715004742311"}})]),s._v(" "),t("p",[s._v("R2:")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715004658604.png",alt:"image-20210715004658604"}})]),s._v(" "),t("blockquote",[t("p",[s._v("完成以上的全部过程后，R1和R2之间的"),t("code",[s._v("邻居关系")]),s._v("建立成功。")])]),s._v(" "),t("h3",{attrs:{id:"dead-interval超时-路由器开始选举dr-bdr"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dead-interval超时-路由器开始选举dr-bdr"}},[s._v("#")]),s._v(" Dead Interval超时，路由器开始选举DR/BDR")]),s._v(" "),t("blockquote",[t("p",[t("em",[s._v("选举DR/BDR和是否已经建立")]),s._v("*"),t("u",[s._v("邻居关系")]),s._v("*"),t("em",[s._v("没有直接联系")]),s._v("，它主要是一个接口状态的超时任务，只要接口的"),t("code",[s._v("Wait Timer")]),s._v("超时后就会进行"),t("code",[s._v("DR/BDR")]),s._v("的选举")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715105013673.png",alt:"image-20210715105013673"}})]),s._v(" "),t("p",[s._v("DR/BDR的选举遵循如下规则：")]),s._v(" "),t("ol",[t("li",[s._v("接口优先级大的，优先；")]),s._v(" "),t("li",[s._v("RID大的优先；")])]),s._v(" "),t("h3",{attrs:{id:"进入ex-start状态-进行主从协商"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进入ex-start状态-进行主从协商"}},[s._v("#")]),s._v(" 进入"),t("code",[s._v("ex-start")]),s._v("状态，进行主从协商")]),s._v(" "),t("blockquote",[t("p",[s._v("一个路由器如果需要发送"),t("code",[s._v("DBD")]),s._v("报文协商"),t("code",[s._v("Master\\Salver")]),s._v(",那么需要等待"),t("code",[s._v("Wait Timer")]),s._v("超时后选举完成DR/BDR路由器后，才会发送"),t("code",[s._v("DBD")]),s._v("协商主从关系；")]),s._v(" "),t("p",[s._v("路由器发出协商主从关系的"),t("code",[s._v("DBD")]),s._v("报文中，是不包含"),t("code",[s._v("LSA")]),s._v("信息的；")])]),s._v(" "),t("p",[s._v("R1:从R1的LOG日志可以看到，在"),t("code",[s._v("Wait Timer")]),s._v("超时之前R1不会发送DBD信息（即使受到了R2的DBD报文，也不会回复）；")]),s._v(" "),t("p",[s._v("但是当R1一旦"),t("code",[s._v("Wait Timer")]),s._v("超时后，R1立马发送"),t("code",[s._v("DBD")]),s._v("报文；")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715112505383.png",alt:"image-20210715112505383"}})]),s._v(" "),t("p",[s._v("并且可以从抓包中看到这个报文不包含LSA信息,并且"),t("code",[s._v("I,M,MS")]),s._v("的字段都是"),t("code",[s._v("1")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715131349453.png",alt:"image-20210715131349453"}})]),s._v(" "),t("p",[s._v("R2：从R2的log日志可以看到，从R2完成了DR/BDR的选举之后，就开始向R1发送DBD报文了，但一直没有得到回复，一直等到R1"),t("code",[s._v("Wait Timer")]),s._v("超时过后并完成了DR/BDR的选举之后，才收到R1的DBD消息。")]),s._v(" "),t("p",[s._v("可以从如下R2的log日志可以看到R2在21min41.862s收到R1的DBD报文；")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715112126657.png",alt:"image-20210715112126657"}})]),s._v(" "),t("p",[s._v("同时也可以看到R2在21min40.975s发送的报文中，"),t("code",[s._v("I,M,MS")]),s._v("的字段都是"),t("code",[s._v("1")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715133725888.png",alt:"image-20210715133725888"}})]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("I,M,MS")]),s._v("的字段的含义如下：")]),s._v(" "),t("p",[t("code",[s._v("I")]),s._v("：在"),t("code",[s._v("Exstart")]),s._v(", Master/Salver的协商阶段，该字段都是置"),t("code",[s._v("1")])]),s._v(" "),t("p",[t("code",[s._v("M")]),s._v("："),t("code",[s._v("1")]),s._v("表示后面还有DD报文,"),t("code",[s._v("0")]),s._v("表示没有报文了")]),s._v(" "),t("p",[t("code",[s._v("MS")]),s._v("："),t("code",[s._v("1")]),s._v("表示主，"),t("code",[s._v("0")]),s._v("表示从")]),s._v(" "),t("p",[s._v("第一个DD报文两边都认为自己是主，所以三个字段都只置为"),t("code",[s._v("1")])])]),s._v(" "),t("p",[s._v("通过观察R1的log日志，发现R1在21min41.862s收到R2的"),t("code",[s._v("DBD")]),s._v("报文后，根据收到的报文中RID的信息，"),t("strong",[t("u",[s._v("RID"),t("code",[s._v("大")]),s._v("的为"),t("code",[s._v("Master")]),s._v("，"),t("code",[s._v("小")]),s._v("的为"),t("code",[s._v("Salver")])])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715142955292.png",alt:"image-20210715142955292"}})]),s._v(" "),t("p",[s._v("从抓包日志可以看到R1发出的")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715143335908.png",alt:"image-20210715143335908"}})]),s._v(" "),t("p",[s._v("R2:")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715143109540.png",alt:"image-20210715143109540"}})]),s._v(" "),t("p",[s._v("在R2接口上抓包可以看到收到了R1发过来的，包含了声明R1是"),t("code",[s._v("Salve")]),s._v("·的DBD报文，R2收到报文后，立马规定了自己是"),t("code",[s._v("Master")]),s._v("的角色，并且由R1的"),t("code",[s._v("DBD")]),s._v("报文中"),t("code",[s._v("I")]),s._v("的字段设置为"),t("code",[s._v("0")]),s._v("，知道了"),t("code",[s._v("ex-start")]),s._v("状态已经过去，由此进去下一个状态"),t("code",[s._v("ex-change")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715151925489.png",alt:"image-20210715151925489"}})]),s._v(" "),t("h3",{attrs:{id:"进入ex-change状态-交换lsa"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进入ex-change状态-交换lsa"}},[s._v("#")]),s._v(" 进入"),t("code",[s._v("ex-change")]),s._v("状态，交换LSA")]),s._v(" "),t("blockquote",[t("p",[s._v("当收到的DBD报文中，"),t("code",[s._v("I")]),s._v("字段为"),t("code",[s._v("0")]),s._v("时，将邻居状态变成"),t("code",[s._v("ex-change")])])]),s._v(" "),t("p",[s._v("R1发送给R2的DBD报文中，"),t("code",[s._v("I")]),s._v("字段为"),t("code",[s._v("0")]),s._v("，并且"),t("code",[s._v("MS")]),s._v("字段为"),t("code",[s._v("0")]),s._v("表明自己"),t("code",[s._v("Salver")]),s._v("的角色，同时可以看到，这个"),t("code",[s._v("DBD")]),s._v("报文中含有"),t("code",[s._v("LSA")]),s._v("信息，并且"),t("code",[s._v("M")]),s._v("字段设置为"),t("code",[s._v("1")]),s._v("表明还有DBD报文需要发送，一般"),t("code",[s._v("M")]),s._v("都是"),t("code",[s._v("0")]),s._v("；")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715155633143.png",alt:"image-20210715155633143"}})]),s._v(" "),t("p",[s._v("R2收到R1的包含LSA的DBD报文，同时也发送给R1z自己的包含LSA信息的报文")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715161109958.png",alt:"image-20210715161109958"}})]),s._v(" "),t("p",[s._v("R1如果需要进一步获取LSA的详细情况，会给R2发送"),t("code",[s._v("LSR")]),s._v("信息,并R1上，将R2的邻居状态变成"),t("code",[s._v("Loading")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715162452828.png",alt:"image-20210715162452828"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715163126691.png",alt:"image-20210715163126691"}})]),s._v(" "),t("p",[s._v("同时R2收到R1的LSR请求后，会发送LSU信息给R1,包含更加详尽的LSA信息"),t("u",[t("strong",[s._v("（只有在"),t("code",[s._v("LSU")]),s._v("信息中才可以看到完整的LSA信息）")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715163038090.png",alt:"image-20210715163038090"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715163230552.png",alt:"image-20210715163230552"}})]),s._v(" "),t("h3",{attrs:{id:"lsr-lsu-同步完成lsdb后-建立邻接关系-状态变为full"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lsr-lsu-同步完成lsdb后-建立邻接关系-状态变为full"}},[s._v("#")]),s._v(" LSR/LSU 同步完成LSDB后，建立邻接关系，状态变为"),t("code",[s._v("FULL")])]),s._v(" "),t("p",[s._v("R2收到所有的LSU信息后，放入自己的LSDB中，并给R1发送一个"),t("code",[s._v("LSACK")])]),s._v(" "),t("p",[s._v("如果R2的所有LSR请求，都得到LSU更新后，会在R2上将邻居R1的状态置为"),t("code",[s._v("FULL")]),s._v("(可能这时候R1上对应R2的邻居状态还"),t("code",[s._v("不是FULL")]),s._v(")")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715164145092.png",alt:"image-20210715164145092"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://pic.bluebaozi.cn/img/image-20210715164559035.png",alt:"image-20210715164559035"}})]),s._v(" "),t("p",[s._v("R1同理，这里就不在赘述了。")]),s._v(" "),t("h2",{attrs:{id:"配置ospf"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置ospf"}},[s._v("#")]),s._v(" 配置OSPF")]),s._v(" "),t("ol",[t("li",[s._v("配置接口地址")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("R1"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#conf t")]),s._v("\nEnter configuration commands, one per line.  End with CNTL/Z.\nR1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#int e0/0")]),s._v("\nR1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config-if"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ip add 192.168.1.1 255.255.255.0")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("配置环回口地址")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("R1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#int lo0")]),s._v("\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:07:22.851: %LINEPROTO-5-UPDOWN: Line protocol on Interface Loopback0,                                         changed state to up\nR1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config-if"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ip add 1.1.1.1 255.255.255.0")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("配置OSPF进程")])]),s._v(" "),t("p",[s._v("OSPF配置模板如下：(建议手动配置RID,以loopback接口为佳)")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("router ospf "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ospf进程号"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    router-id "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ospf的RID"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\tnetwork "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("网络地址"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("反掩码"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" area "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("区域地址"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("blockquote",[t("p",[t("code",[s._v("process-id 进程号")]),s._v(":")]),s._v(" "),t("p",[s._v("OSPF支持多进程，为不同的的业务可以分配不同的进程，用进程号区分。但是进程号是本地概念，不会影响其他路由器的进程号选择，所以不同路由器之间的进程号相同也没有影响。而且，不同路由器之间不同进程的OSPF也可以进行报文交互。")]),s._v(" "),t("p",[t("code",[s._v("router-id 路由器ID")]),s._v(":")]),s._v(" "),t("p",[s._v("需要保证在OSPF全网中唯一。")])]),s._v(" "),t("p",[s._v("配置R1路由器的ospf的script如下:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("router ospf "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\trouter-id "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.1\n\tnetwork "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.0 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.255 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("以此类推，将所有路由器配置完成。")]),s._v(" "),t("p",[s._v("开启debug可以查看OSPF邻居建立的交互过程：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("debug "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v(" ospf events \ndebug "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v(" ospf hello  //查看hello包的过程\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("R1")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:49:57.662: OSPF EVENT Et0/0: Route adjust\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:49:57.662: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.5 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:49:57.662: OSPF-1 EVENT: Config: network "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.0 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".255.0 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nR1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config-if"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:50:07.248: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.5 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\nR1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config-if"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:50:16.740: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.5 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\nR1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config-if"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:50:25.927: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.5 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\nR1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config-if"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:50:35.028: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.5 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\nR1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config-if"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:50:44.490: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.5 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\nR1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config-if"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:50:46.349: OSPF-1 HELLO Et0/0: Rcv hello from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:50:46.349: OSPF-1 HELLO Et0/0: Send immediate hello to nbr "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2, src address "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:50:46.349: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\nR1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config-if"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:50:54.240: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.5 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:50:54.241: OSPF-1 HELLO Et0/0: Rcv hello from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\nR1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config-if"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:50:54.242: %OSPF-5-ADJCHG: Process "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", Nbr "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2 on Ethernet0/0 from LOADING to FULL, Loading Done\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:50:56.092: OSPF-1 HELLO Et0/0: Rcv hello from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:51:04.231: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.5 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:51:05.871: OSPF-1 HELLO Et0/0: Rcv hello from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:51:14.123: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.5 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:51:15.096: OSPF-1 HELLO Et0/0: Rcv hello from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:51:23.498: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.5 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:51:24.508: OSPF-1 HELLO Et0/0: Rcv hello from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:51:32.943: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.5 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:51:33.961: OSPF-1 HELLO Et0/0: Rcv hello from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:51:42.756: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.5 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:51:43.008: OSPF-1 HELLO Et0/0: Rcv hello from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:51:52.127: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.5 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:51:52.645: OSPF-1 HELLO Et0/0: Rcv hello from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:52:01.456: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.5 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:52:02.267: OSPF-1 HELLO Et0/0: Rcv hello from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:52:11.043: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.5 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:52:11.679: OSPF-1 HELLO Et0/0: Rcv hello from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:52:20.560: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.5 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:52:21.653: OSPF-1 HELLO Et0/0: Rcv hello from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br")])]),t("p",[s._v("R2:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:50:46.348: OSPF EVENT Et0/0: Route adjust\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:50:46.348: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.5 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:50:46.349: OSPF-1 EVENT: Config: network "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.0 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".255.0 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nR2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config-if"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:50:54.240: OSPF-1 HELLO Et0/0: Rcv hello from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.1 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:50:54.240: OSPF-1 HELLO Et0/0: Send immediate hello to nbr "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.1, src address "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:50:54.240: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\nR2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config-if"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:50:54.243: %OSPF-5-ADJCHG: Process "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", Nbr "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.1 on Ethernet0/0 from LOADING to FULL, Loading Done\nR2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config-if"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:50:56.091: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.5 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\nR2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config-if"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:51:04.231: OSPF-1 HELLO Et0/0: Rcv hello from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.1 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\nR2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config-if"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:51:05.870: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.5 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\nR2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config-if"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:51:14.123: OSPF-1 HELLO Et0/0: Rcv hello from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.1 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:51:15.095: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.5 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\nR2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config-if"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:51:23.499: OSPF-1 HELLO Et0/0: Rcv hello from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.1 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:51:24.507: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.5 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\nR2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config-if"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:51:32.944: OSPF-1 HELLO Et0/0: Rcv hello from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.1 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:51:33.961: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.5 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\nR2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config-if"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:51:42.756: OSPF-1 HELLO Et0/0: Rcv hello from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.1 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:51:43.007: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.5 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\nR2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config-if"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:51:52.127: OSPF-1 HELLO Et0/0: Rcv hello from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.1 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:51:52.644: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.5 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\nR2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config-if"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:52:01.456: OSPF-1 HELLO Et0/0: Rcv hello from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.1 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:52:02.266: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.5 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\nR2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("config-if"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:52:11.044: OSPF-1 HELLO Et0/0: Rcv hello from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.1 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\n*Jul "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" 07:52:11.679: OSPF-1 HELLO Et0/0: Send hello to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.5 area "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br")])]),t("p",[s._v("可以查看R1 的 ospf的邻居：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("R1"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#show ip ospf neighbor")]),s._v("\n\nNeighbor ID     Pri   State           Dead Time   Address         Interface\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.2")]),s._v(".2.2           "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   FULL/DR        00:00:31    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.2     Ethernet0/0\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("查看R2的OSPF邻居")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("R2"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#show ip ospf neighbor")]),s._v("\n\nNeighbor ID     Pri   State           Dead Time   Address         Interface\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.1           "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   FULL/BDR         00:00:31    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1     Ethernet0/0\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("可以看到在R1和R2之间的DR/BDR的选举中，R2是作为DR（Designated Router指定路由器）")]),s._v(" "),t("ol",{attrs:{start:"4"}},[t("li",[t("p",[s._v("将路由宣告进入OSPF网络。")]),s._v(" "),t("p",[s._v("有两种方法：")]),s._v(" "),t("p",[s._v("a. 将接口宣告到OSPF中")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int")]),s._v(" xxx\n ip ospf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("ospf 进程号"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" area "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("区域ID"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("b.使用"),t("code",[s._v("network")]),s._v("直接宣告")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("router ospf "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ospf进程号"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    router"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("id")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ospf的RID"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\tnetwork "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("网络地址"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("反掩码"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" area "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("区域地址"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])])])])}),[],!1,null,null,null);a.default=n.exports}}]);