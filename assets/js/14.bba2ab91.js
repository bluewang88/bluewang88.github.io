(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{462:function(s,a,t){"use strict";t.r(a);var n=t(9),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"使用docker安装zabbix"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用docker安装zabbix"}},[s._v("#")]),s._v(" 使用docker安装zabbix")]),s._v(" "),t("h2",{attrs:{id:"简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[s._v("#")]),s._v(" 简介")]),s._v(" "),t("p",[s._v("Docker是目前较为流行的开源应用容器引擎，基于Go语言并遵从Apache2.0协议开源。")]),s._v(" "),t("p",[s._v("zabbix是一个基于WEB界面的提供分布式系统监视以及网络监视功能的企业级的开源解决方案。")]),s._v(" "),t("p",[s._v("zabbix由zabbix server与可选组件zabbix agent两部门组成。")]),s._v(" "),t("p",[s._v("zabbix server可以通过SNMP，zabbix agent，ping，端口监视等方法提供对远程服务器/网络状态的监视。")]),s._v(" "),t("p",[s._v("zabbix agent需要安装在被监视的目标服务器上，它主要完成对硬件信息或与操作系统有关的内存，CPU等信息的收集。")]),s._v(" "),t("h2",{attrs:{id:"安装环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装环境"}},[s._v("#")]),s._v(" 安装环境")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("镜像")]),s._v(" "),t("th",[s._v("版本")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("ubantu(宿主机)")]),s._v(" "),t("td",[s._v("18.04.5 LTS (Bionic Beaver)")])]),s._v(" "),t("tr",[t("td",[s._v("docker")]),s._v(" "),t("td",[s._v("20.10.2")])]),s._v(" "),t("tr",[t("td",[s._v("MySQL（container）")]),s._v(" "),t("td",[s._v("8.0")])]),s._v(" "),t("tr",[t("td",[s._v("zabbix-java-gateway (container)")]),s._v(" "),t("td",[s._v("alpine-5.4")])]),s._v(" "),t("tr",[t("td",[s._v("zabbix-server-mysql (container)")]),s._v(" "),t("td",[s._v("alpine-5.4")])]),s._v(" "),t("tr",[t("td",[s._v("zabbix-web-nginx-mysql (container)")]),s._v(" "),t("td",[s._v("alpine-5.4")])])])]),s._v(" "),t("h2",{attrs:{id:"安装步骤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装步骤"}},[s._v("#")]),s._v(" 安装步骤")]),s._v(" "),t("h3",{attrs:{id:"使用docker下载镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用docker下载镜像"}},[s._v("#")]),s._v(" 使用docker下载镜像")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("检查docker运行是否正常，看到"),t("code",[s._v("Active")]),s._v("即为正常")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl status docker")]),s._v("\n● docker.service - Docker Application Container Engine\n   Loaded: loaded "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/lib/systemd/system/docker.service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" enabled"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" vendor preset: enabled"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   Active: active "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("running"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" since Wed "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-06-09 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":17:07 CST"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" weeks "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" days ago\n     Docs: https://docs.docker.com\n Main PID: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2108")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dockerd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    Tasks: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\n   CGroup: /system.slice/docker.service\n           └─2108 /usr/bin/dockerd -H fd:// --containerd"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/run/containerd/containerd.sock\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("docker下载mysql的容器镜像")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker pull mysql:8.0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.0")]),s._v(": Pulling from library/mysql\nb4d181a07f80: Pull complete\na462b60610f5: Pull complete\n578fafb77ab8: Pull complete\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("524046006037")]),s._v(": Pull complete\nd0cbe54c8855: Pull complete\naa18e05cc46d: Pull complete\n32ca814c833f: Pull complete\n9ecc8abdb7f5: Pull complete\nad042b682e0f: Pull complete\n71d327c6bb78: Pull complete\n165d1d10a3fa: Pull complete\n2f40c47d0626: Pull complete\nDigest: sha256:52b8406e4c32b8cf0557f1b74517e14c5393aff5cf0384eff62d9e81f4985d4b\nStatus: Downloaded newer image "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" mysql:8.0\ndocker.io/library/mysql:8.0\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("docker 下载 zabbix/zabbix-java-gateway:alpine-5.4-latest")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker pull zabbix/zabbix-java-gateway:alpine-5.4-latest")]),s._v("\nalpine-5.4-latest: Pulling from zabbix/zabbix-java-gateway\n540db60ca938: Pull complete\nf84bb590f298: Pull complete\nde5ed48d4371: Pull complete\n062f7bb1cbd4: Pull complete\nafc366541c27: Pull complete\nc29b4e00e47c: Pull complete\nDigest: sha256:f850577a187a9443eb0969793fa14ae4f386c5542204f12c744e2d195b03212a\nStatus: Downloaded newer image "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" zabbix/zabbix-java-gateway:alpine-5.4-latest\ndocker.io/zabbix/zabbix-java-gateway:alpine-5.4-latest\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("docker 下载 zabbix/zabbix-server-mysql:alpine-5.4-latest")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker pull zabbix/zabbix-server-mysql:alpine-5.4-latest")]),s._v("\nalpine-5.4-latest: Pulling from zabbix/zabbix-server-mysql\n540db60ca938: Already exists\n00f30e6d0727: Pull complete\nd5842771006f: Pull complete\n5f1085123b4c: Pull complete\nDigest: sha256:3c577178ee0351a44c58eeae8d324a935891ca9424be8370d7dcbca5c0bd4fc8\nStatus: Downloaded newer image "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" zabbix/zabbix-server-mysql:alpine-5.4-latest\ndocker.io/zabbix/zabbix-server-mysql:alpine-5.4-latest\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("docker 下载 zabbix/zabbix-web-nginx-mysql:alpine-5.4-latest")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker pull zabbix/zabbix-web-nginx-mysql:alpine-5.4-latest")]),s._v("\nalpine-5.4-latest: Pulling from zabbix/zabbix-web-nginx-mysql\n540db60ca938: Already exists\n79d8b66e9af9: Pull complete\ne170e0eb3be2: Pull complete\ne5b3ee9f38c7: Pull complete\n77bb5c503df3: Pull complete\nDigest: sha256:9ce9763b95cc9c61eecfb95aa53035569a340ceb5e896af4560f8e2415e9532b\nStatus: Downloaded newer image "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" zabbix/zabbix-web-nginx-mysql:alpine-5.4-latest\ndocker.io/zabbix/zabbix-web-nginx-mysql:alpine-5.4-latest\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("查看docker 镜像仓库")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker images")]),s._v("\nREPOSITORY                      TAG                 IMAGE ID       CREATED        SIZE\nzabbix/zabbix-java-gateway      alpine-5.4-latest   2552b7f42e42   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("37")]),s._v(" hours ago   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("84")]),s._v(".4MB\nmysql                           "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.0")]),s._v("                 5c62e459e087   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" days ago     556MB\nzabbix/zabbix-web-nginx-mysql   alpine-5.4-latest   c75fcde05a14   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" days ago    166MB\nzabbix/zabbix-server-mysql      alpine-5.4-latest   856abc12b012   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" days ago    69MB\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"启动docker-镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动docker-镜像"}},[s._v("#")]),s._v(" 启动docker 镜像")]),s._v(" "),t("blockquote",[t("p",[s._v("这里有一个需要注意的地方，按照官方文档的安装步骤，zabbix组件之间是无法链接，需要修改host文件，将主机名解析为对应dockers容器的ip地址才可以互相连接。")]),s._v(" "),t("p",[s._v("并且mysql不能安装官方文档的dockers启动命令启动，否则会出现Exit(1)的错误，导致MySQL无法启动。")])]),s._v(" "),t("h4",{attrs:{id:"启动mysql的实例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动mysql的实例"}},[s._v("#")]),s._v(" 启动MySQL的实例")]),s._v(" "),t("p",[s._v("输入命令如下：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(" docker run --name mysql-server -t "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n      -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_DATABASE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zabbix"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n      -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_USER")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zabbix"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n      -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zabbix_pwd"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n      -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_ROOT_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root_pwd"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n      -d mysql:8.0 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n      --restart unless-stopped "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n      --character-set-server"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8 --collation-server"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8_bin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n      --default-authentication-plugin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql_native_password\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("通过查看docker 实例可以发现，mysql的实例并没有启动成功，出现"),t("code",[s._v("Exited(1)")]),s._v("的报错：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(":~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps -a")]),s._v("\nCONTAINER ID   IMAGE       COMMAND                  CREATED         STATUS                     PORTS     NAMES\n19525cb6c62d   mysql:8.0   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker-entrypoint.s…"')]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" seconds ago   Exited "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" seconds ago             mysql-server\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("通过查看dockers的日志发现，其不支持"),t("code",[s._v("--restart")]),s._v("的参数:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker logs 19525cb6c62d")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-06-30 06:21:37+00:00 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Note"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Entrypoint"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": Entrypoint script "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" MySQL Server "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.0")]),s._v(".25-1debian10 started.\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-06-30 06:21:37+00:00 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Note"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Entrypoint"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": Switching to dedicated user "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mysql'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-06-30 06:21:37+00:00 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Note"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Entrypoint"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": Entrypoint script "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" MySQL Server "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.0")]),s._v(".25-1debian10 started.\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-06-30 06:21:38+00:00 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Note"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Entrypoint"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": Initializing database files\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-06-30T06:21:38.038293Z "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("System"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("MY-013169"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" /usr/sbin/mysqld "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mysqld "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.0")]),s._v(".25"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" initializing of server "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" progress as process "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("41")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-06-30T06:21:38.039259Z "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Warning"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("MY-013242"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" --character-set-server: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf8'")]),s._v(" is currently an "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the character "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" UTF8MB3, but will be an "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("UTF8MB4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" a future release. Please consider using UTF8MB4 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" order to be unambiguous.\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-06-30T06:21:38.039264Z "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Warning"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("MY-013244"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" --collation-server: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf8_bin'")]),s._v(" is a collation of the deprecated character "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" UTF8MB3. Please consider using UTF8MB4 with an appropriate collation instead.\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-06-30T06:21:38.045660Z "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("System"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("MY-013576"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("InnoDB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" InnoDB initialization has started.\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-06-30T06:21:39.209774Z "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("System"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("MY-013577"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("InnoDB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" InnoDB initialization has ended.\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-06-30T06:21:41.413061Z "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ERROR"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("MY-000068"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" unknown option "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'--restart'")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-06-30T06:21:41.413878Z "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ERROR"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("MY-013236"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" The designated data directory /var/lib/mysql/ is unusable. You can remove all files that the server added to it.\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-06-30T06:21:41.415023Z "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ERROR"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("MY-010119"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Aborting\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-06-30T06:21:43.161174Z "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("System"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("MY-010910"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" /usr/sbin/mysqld: Shutdown complete "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mysqld "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.0")]),s._v(".25"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  MySQL Community Server - GPL.\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("p",[s._v("去掉参数后即可正常启动：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  docker run --name mysql-server -t \\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_DATABASE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zabbix"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_USER")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zabbix"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zabbix_pwd"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_ROOT_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root_pwd"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       -d mysql:8.0 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       --character-set-server"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8 --collation-server"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8_bin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       --default-authentication-plugin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql_native_password\nb5379518d1a28ba025cdb1b00c2cc6b07a528d038a1a36aff557ccb92b131fe5\n~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps -a")]),s._v("\nCONTAINER ID   IMAGE       COMMAND                  CREATED         STATUS         PORTS                 NAMES\nb5379518d1a2   mysql:8.0   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker-entrypoint.s…"')]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" seconds ago   Up "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" seconds   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("/tcp, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("33060")]),s._v("/tcp   mysql-server\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h4",{attrs:{id:"启动zabbix-java-gateway"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动zabbix-java-gateway"}},[s._v("#")]),s._v(" 启动zabbix-java-gateway")]),s._v(" "),t("blockquote",[t("p",[s._v("这里开始需要使docker实例的hosts文件调用宿主机的hosts文件"),t("code",[s._v("-v /etc/hosts:/etc/hosts")]),s._v("，便于容器之间的互联。")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   docker run --name zabbix-java-gateway -t \\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   -v /etc/hosts:/etc/hosts "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       --restart unless-stopped "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       -d zabbix/zabbix-java-gateway:alpine-5.4-latest\n7eda44ca1dee0b3a7fb76c22fa9d217a86c98ad8113f7ffc84a9fe405a993eab\n~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps -a")]),s._v("\nCONTAINER ID   IMAGE                                          COMMAND                  CREATED         STATUS         PORTS                 NAMES\n7eda44ca1dee   zabbix/zabbix-java-gateway:alpine-5.4-latest   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker-entrypoint.s…"')]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" seconds ago   Up "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" seconds   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10052")]),s._v("/tcp             zabbix-java-gateway\nb5379518d1a2   mysql:8.0                                      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker-entrypoint.s…"')]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" minutes ago   Up "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" minutes   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("/tcp, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("33060")]),s._v("/tcp   mysql-server\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h4",{attrs:{id:"启动zabbix-server-mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动zabbix-server-mysql"}},[s._v("#")]),s._v(" 启动zabbix-server-mysql")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(":~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run --name zabbix-server-mysql -t \\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       -v /etc/hosts:/etc/hosts "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DB_SERVER_HOST")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mysql-server"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_DATABASE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zabbix"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_USER")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zabbix"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zabbix_pwd"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_ROOT_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root_pwd"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ZBX_JAVAGATEWAY")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zabbix-java-gateway"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10051")]),s._v(":10051 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       --restart unless-stopped "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       -d zabbix/zabbix-server-mysql:alpine-5.4-latest\n2127ef69445f3a10d633131e834455384724a9a977b4de752cf73e7888950aae\n~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps -a")]),s._v("\nCONTAINER ID   IMAGE                                          COMMAND                  CREATED         STATUS         PORTS                      NAMES\n2127ef69445f   zabbix/zabbix-server-mysql:alpine-5.4-latest   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/sbin/tini -- /usr/…"')]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds ago   Up "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" seconds   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:10051-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10051")]),s._v("/tcp   zabbix-server-mysql\n7eda44ca1dee   zabbix/zabbix-java-gateway:alpine-5.4-latest   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker-entrypoint.s…"')]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" minutes ago   Up "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" minutes   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10052")]),s._v("/tcp                  zabbix-java-gateway\nb5379518d1a2   mysql:8.0                                      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker-entrypoint.s…"')]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" minutes ago   Up "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" minutes   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("/tcp, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("33060")]),s._v("/tcp        mysql-server\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("h4",{attrs:{id:"启动zabbix-web-nginx-mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动zabbix-web-nginx-mysql"}},[s._v("#")]),s._v(" 启动zabbix-web-nginx-mysql")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run --name zabbix-web-nginx-mysql -t \\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   -v /etc/hosts:/etc/hosts "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ZBX_SERVER_HOST")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zabbix-server-mysql"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DB_SERVER_HOST")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mysql-server"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_DATABASE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zabbix"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_USER")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zabbix"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zabbix_pwd"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_ROOT_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root_pwd"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":8080 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       --restart unless-stopped "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("       -d zabbix/zabbix-web-nginx-mysql:alpine-5.4-latest\n8b1eca7732bad510b667b1c7a8f6552c647878f4dd062a580e7ba14ec7683636\n~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps -a")]),s._v("\nCONTAINER ID   IMAGE                                             COMMAND                  CREATED              STATUS              PORTS                            NAMES\n8b1eca7732ba   zabbix/zabbix-web-nginx-mysql:alpine-5.4-latest   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker-entrypoint.sh"')]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds ago        Up "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" seconds        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8443")]),s._v("/tcp, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:80-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("/tcp   zabbix-web-nginx-mysql\n2127ef69445f   zabbix/zabbix-server-mysql:alpine-5.4-latest      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/sbin/tini -- /usr/…"')]),s._v("   About a minute ago   Up About a minute   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:10051-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10051")]),s._v("/tcp         zabbix-server-mysql\n7eda44ca1dee   zabbix/zabbix-java-gateway:alpine-5.4-latest      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker-entrypoint.s…"')]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" minutes ago        Up "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" minutes        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10052")]),s._v("/tcp                        zabbix-java-gateway\nb5379518d1a2   mysql:8.0                                         "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker-entrypoint.s…"')]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" minutes ago        Up "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" minutes        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("/tcp, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("33060")]),s._v("/tcp              mysql-server\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("h4",{attrs:{id:"修改宿主机的hosts文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改宿主机的hosts文件"}},[s._v("#")]),s._v(" 修改宿主机的hosts文件")]),s._v(" "),t("p",[s._v("按照如上操作，目前还无法访问Zabbix的web界面")]),s._v(" "),t("p",[s._v("通过穿docker的日志发现zabbix-server-mysql无法连接上mysql")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker logs 2127ef69445f")]),s._v("\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n**** MySQL server is not available. Waiting "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br")])]),t("p",[s._v("通过如下命令，获取每个docker容器的实际地址")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(":~"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker inspect <container>")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Networks"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bridge"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPAMConfig"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n                    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Links"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n                    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Aliases"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n                    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NetworkID"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"87ae68c5359126fa156a5cc0fe117cec2aea4631da6463ebb0af27a6c7e0aa4b"')]),s._v(",\n                    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"EndpointID"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"86c5edb5611d2a394bddb783418258d028b49fb65a00a88116e7135018b9d8e7"')]),s._v(",\n                    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Gateway"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.18.0.1"')]),s._v(",\n                    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPAddress"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.18.0.5"')]),s._v(",\n                    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPPrefixLen"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(",\n                    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPv6Gateway"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n                    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GlobalIPv6Address"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n                    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GlobalIPv6PrefixLen"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n                    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MacAddress"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"02:42:ac:12:00:05"')]),s._v(",\n                    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"DriverOpts"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("p",[s._v("通过如下命令修改宿主机的hosts文件")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/hosts\n\n\n在hosts文件末尾添加如下信息：\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.18")]),s._v(".0.5         zabbix-web-nginx-mysql\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.18")]),s._v(".0.4         zabbix-server-mysql\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.18")]),s._v(".0.3         zabbix-java-gateway\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.18")]),s._v(".0.2         mysql-server\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("修改完宿主机后需要重启容器，使得配置生效")]),s._v(" "),t("div",{staticClass:"language-she line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("docker restart <container>\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在浏览器输入http://<宿主机IP>")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://markdown-bluebaozi.oss-cn-shanghai.aliyuncs.com/img/image-20210630155223255.png",alt:"image-20210630155223255"}})]),s._v(" "),t("p",[s._v("输入默认账户密码Admin/zabbix,可以看到zabbix的界面。")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://markdown-bluebaozi.oss-cn-shanghai.aliyuncs.com/img/image-20210630155536028.png",alt:"image-20210630155536028"}})])])}),[],!1,null,null,null);a.default=e.exports}}]);